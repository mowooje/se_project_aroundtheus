!function(){"use strict";class e{constructor(e,t,s){this._data=e,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector("#card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector("#card__trash-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardElement.querySelector("#card-image").addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_handleLikeIcon(){this._cardElement.querySelector("#card__like-button").classList.toggle("card__like-button_active")}getView(){this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0);const e=this._cardElement.querySelector("#card-image"),t=this._cardElement.querySelector("#card-title");return e.src=this._data.link,e.alt=this._data.name,t.textContent=this._data.name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){this.errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this.errorMessageEl.textContent=e.validationMessage,this.errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this.errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this.errorMessageEl.textContent=e.validationMessage,this.errorMessageEl.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputEls.some((e=>!e.validity.valid))}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this.disableButton()})),this.toggleButtonState()}resetValidation(){this.toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e){let{popupSelector:t}=e;this._popUpElement=document.querySelector(t),this._closeButton=this._popUpElement.querySelector(".modal__close"),this.close=this.close.bind(this)}open(){this._popUpElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeKey),document.addEventListener("mousedown",this._handleOutsideClick)}close(){this._popUpElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeKey),document.removeEventListener("mousedown",this._handleOutsideClick)}_handleEscapeKey=e=>{"Escape"===e.key&&this.close()};_handleOutsideClick=e=>{e.target.classList.contains("modal")&&this.close()};setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}}class i extends s{constructor(e,t,s){super({popupSelector:e}),this._popup=document.querySelector(e),this._handleFormSubmit=t,this._config=s,this._form=this._popup.querySelector(this._config.formSelector),this.inputEl=this._popUpElement.querySelectorAll(".modal__input"),this.inputValues=document.querySelectorAll(this._config.inputSelector)}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._form.reset()}))}_getInputValues(){return this.inputValues={},this.inputEl.forEach((e=>{this.inputValues[e.name]=e.value})),this.inputValues}setInputValues(e){this.inputValues.forEach((t=>{t.value=e[t.name]}))}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__form_input_error",errorClass:"modal__error_visible"},r=document.querySelector("#profile-edit-button"),o=document.querySelector("#profile-edit-modal"),a=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),l=document.querySelector("#profile-description-input"),c=o.querySelector(".modal__form"),u=(document.querySelector("#card-template").content.firstElementChild,document.querySelector(".cards__list"),document.querySelector(".profile__add-button")),d=document.querySelector(".modal__card-form"),_=(document.querySelector("#add-card-modal"),document.querySelector(".modal__preview-image"),document.querySelector(".modal__preview-description"),"#card-template"),h=new class{constructor(e){let{profileTitle:t,profileDescription:s}=e;this._title=document.querySelector(t),this._description=document.querySelector(s)}getUserInfo(){return this._userInfo={title:this._title.textContent,description:this._description.textContent},this._userInfo}setUserInfo(e){this._title.textContent=e.title,this._description.textContent=e.description}}({profileTitle:".profile__title",profileDescription:".profile__description"});u.addEventListener("click",(()=>{f.open()})),r.addEventListener("click",(()=>{a.value=h.getUserInfo().title,l.value=h.getUserInfo().title,E.open()}));const m=new t(n,c),p=new t(n,d);m.enableValidation(),p.enableValidation();const E=new i("#profile-edit-modal",(function(e){h.setUserInfo(e),E.close()}),n),f=new i("#add-card-modal",(function(e){const t=g({name:e.name,link:e.link});y.addItem(t),f.close()}),n);function S(e,t){v.open(e,t)}E.setEventListeners(),f.setEventListeners();const v=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popUpElement.querySelector(".modal__preview-image"),this._caption=this._popUpElement.querySelector(".modal__preview-description")}open(e){this._image.src=e.link,this._image.alt=e.name,this._caption.textContent=e.name,super.open()}}("#modal-preview");function g(t){return new e(t,_,S).getView()}v.setEventListeners();const y=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this._container.append(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}],renderer:g},".cards__list");y.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEMsTUFBRUMsRUFBSyxTQUFFQyxHQUFVN0QsRUFDN0JsRSxLQUFLZ0ksT0FBU0YsRUFDZDlILEtBQUtpSSxVQUFZRixFQUNqQi9ILEtBQUtrSSxXQUFhcEgsU0FBU1IsY0FBY3VILEVBQzNDLENBRUFNLFdBQUFBLEdBQ0VuSSxLQUFLZ0ksT0FBT3JFLFNBQVN5RSxJQUNuQixNQUFNQyxFQUFjckksS0FBS2lJLFVBQVVHLEdBQ25DcEksS0FBS2tJLFdBQVdJLE9BQU9ELEVBQVksR0FFdkMsQ0FFQWIsT0FBQUEsQ0FBUWUsR0FDTnZJLEtBQUtrSSxXQUFXTSxRQUFRRCxFQUMxQixHSHNHQSxDQUNFVCxNRHZId0IsQ0FDMUIsQ0FDRXhHLEtBQU0sa0JBQ05GLEtBQU0sc0dBRVIsQ0FDRUUsS0FBTSxjQUNORixLQUFNLHlHQUVSLENBQ0VFLEtBQU0saUJBQ05GLEtBQU0sNEdBRVIsQ0FDRUUsS0FBTSxVQUNORixLQUFNLHFHQUVSLENBQ0VFLEtBQU0sd0JBQ05GLEtBQU0scUdBRVIsQ0FDRUUsS0FBTSxpQkFDTkYsS0FBTSxvR0NpR04yRyxTQUFVVCxHQUVaLGdCQUVGQyxFQUFZWSxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcFVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcFVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wVXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNjYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNjYXJkX190cmFzaC1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xuICAgICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgY29uc3QgY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2VcIik7XG4gICAgY29uc3QgY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGl0bGVcIik7XG4gICAgY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fZGF0YS5saW5rO1xuICAgIGNhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX2RhdGEubmFtZTtcbiAgICBjYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsIi8qIFZhbGlkYXRpb24gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgdGhpcy5lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLmVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLmVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIHRoaXMuZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5lcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbHMuc29tZSgoaW5wdXRFbCkgPT4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcFVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUtleSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdXRzaWRlQ2xpY2spO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wVXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlS2V5KTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU91dHNpZGVDbGljayk7XG4gIH1cblxuICBfaGFuZGxlRXNjYXBlS2V5ID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVPdXRzaWRlQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcFVwIGZyb20gXCIuL1BvcFVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwV2l0aEZvcm0gZXh0ZW5kcyBQb3BVcCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIGNvbmZpZykge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICAgIHRoaXMuaW5wdXRFbCA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLmlucHV0VmFsdWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3Rvcik7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLmlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5pbnB1dEVsLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLmlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5pbnB1dFZhbHVlcy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGcgXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtX2lucHV0X2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcFVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wVXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XG5pbXBvcnQgUG9wVXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wVXBXaXRoSW1hZ2UuanNcIjtcblxuLyogRWxlbWVudHMgKi9cbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIEFkZCBCdXR0b25zICovXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXJkLWZvcm1cIik7XG5jb25zdCBhZGROZXdDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIFByZXZpZXcgRWxlbWVudHMgKi9cbmNvbnN0IHByZXZpZXdJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fcHJldmlldy1kZXNjcmlwdGlvblwiXG4pO1xuXG5jb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBwcm9maWxlVGl0bGU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIEZ1bmN0aW9ucyAqL1xuXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZE1vZGFsLm9wZW4oKTtcbn0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8qIEV2ZW50IExpc3RlbmVyICovXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkudGl0bGU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKS50aXRsZTtcbiAgZWRpdE1vZGFsLm9wZW4oKTtcbn0pO1xuLy8gYWRkIG5ldyBjYXJkXG5cbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRDYXJkRm9ybSk7XG5cbnByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGVkaXRNb2RhbCA9IG5ldyBQb3BVcFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQsXG4gIGNvbmZpZ1xuKTtcblxuY29uc3QgYWRkTW9kYWwgPSBuZXcgUG9wVXBXaXRoRm9ybShcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgaGFuZGxlQWRkQ2FyZFN1Ym1pdCxcbiAgY29uZmlnXG4pO1xuXG5lZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzKTtcbiAgZWRpdE1vZGFsLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xuICBwcmV2aWV3Q2FyZE1vZGFsLm9wZW4obmFtZSwgbGluayk7XG59XG5cbmNvbnN0IHByZXZpZXdDYXJkTW9kYWwgPSBuZXcgUG9wVXBXaXRoSW1hZ2UoXCIjbW9kYWwtcHJldmlld1wiKTtcbnByZXZpZXdDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBhZGRDYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIHJldHVybiBhZGRDYXJkLmdldFZpZXcoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBjb25zdCBuYW1lID0gaW5wdXRWYWx1ZXMubmFtZTtcbiAgY29uc3QgbGluayA9IGlucHV0VmFsdWVzLmxpbms7XG4gIGNvbnN0IGNhcmRFbCA9IHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0pO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbCk7XG4gIGFkZE1vZGFsLmNsb3NlKCk7XG59XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVUaXRsZSwgcHJvZmlsZURlc2NyaXB0aW9uIH0pIHtcbiAgICB0aGlzLl90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZVRpdGxlKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZURlc2NyaXB0aW9uKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3VzZXJJbmZvID0ge1xuICAgICAgdGl0bGU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gZGF0YS50aXRsZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImltcG9ydCBQb3BVcCBmcm9tIFwiLi9Qb3BVcC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3BVcFdpdGhJbWFnZSBleHRlbmRzIFBvcFVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3LWRlc2NyaXB0aW9uXCJcbiAgICApO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfZGF0YSIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2VFbCIsImNhcmRUaXRsZUVsIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxzIiwic29tZSIsIl9lbmFibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJkaXNhYmxlQnV0dG9uIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJpbnB1dEVsZW1lbnQiLCJQb3BVcCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcFVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsImNsb3NlIiwiYmluZCIsIm9wZW4iLCJfaGFuZGxlRXNjYXBlS2V5IiwiX2hhbmRsZU91dHNpZGVDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJ0YXJnZXQiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wVXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJjb25maWciLCJzdXBlciIsIl9wb3B1cCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2NvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0VmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkQ2FyZEJ1dHRvbiIsImZpcnN0RWxlbWVudENoaWxkIiwiYWRkQ2FyZEZvcm0iLCJ1c2VySW5mbyIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsIl90aXRsZSIsIl9kZXNjcmlwdGlvbiIsImdldFVzZXJJbmZvIiwiX3VzZXJJbmZvIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiYWRkTW9kYWwiLCJlZGl0TW9kYWwiLCJwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImNhcmRFbCIsInJlbmRlckNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJwcmV2aWV3Q2FyZE1vZGFsIiwiX2ltYWdlIiwiX2NhcHRpb24iLCJjYXJkRGF0YSIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJjYXJkRWxlbWVudCIsImFwcGVuZCIsImVsZW1lbnQiLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==